<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>


	<script>

		function getBase64(url) {
        	// 通过构造函数来创建的 img 实例，在赋予 src 值后就会立刻下载图片，
        	// 相比 createElement() 创建 <img> 省去了 append()，也就避免了文档冗余和污染
	        const image = new Image();
	        image.src = url;
	        image.onload = function(){ 
	        	//要先确保图片完整获取到，这是个异步事件
	            const canvas = document.createElement("canvas"); //创建canvas元素
	            const width = image.width; //确保canvas的尺寸和图片一样
	            const height = image.height;
	            canvas.width = width;
	            canvas.height = height;
	            canvas.getContext("2d").drawImage(image, 0, 0, width, height); //将图片绘制到canvas中
	            dataURL = canvas.toDataURL('image/jpeg'); //转换图片为dataURL
	        	document.body.append(canvas)
	        };
    	}

	</script>
	
</body>
</html>